\hypertarget{class_http_session}{}\doxysection{Http\+Session Class Reference}
\label{class_http_session}\index{HttpSession@{HttpSession}}


Class representing a single H\+T\+TP session.  




{\ttfamily \#include $<$Http\+Session.\+h$>$}



Inheritance diagram for Http\+Session\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{class_http_session__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Http\+Session\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_http_session__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_http_session_abd5cd2414a9ad959461ac4fec9f774d0}{Http\+Session}} (\mbox{\hyperlink{class_server}{Server}} \&server, const std\+::string \&client\+\_\+id, boost\+::asio\+::ip\+::tcp\+::socket \&\&socket)
\begin{DoxyCompactList}\small\item\em Construct a new Http Session\+:\+: Http Session object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_http_session_a1b32fb61d4134c2180c70edd886997b3}{run}} ()
\begin{DoxyCompactList}\small\item\em Run the session. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_http_session_a948383f51cff9c0f300ccaa7c84718a9}{\+\_\+\+\_\+on\+Read}} (boost\+::system\+::error\+\_\+code err\+\_\+code, std\+::size\+\_\+t)
\begin{DoxyCompactList}\small\item\em Method called after getting a new request from the client. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_http_session_ac1db714d3d96b8650a9a9eb20ceadbc3}{\+\_\+\+\_\+on\+Write}} (boost\+::system\+::error\+\_\+code err\+\_\+code, std\+::size\+\_\+t, bool close)
\begin{DoxyCompactList}\small\item\em Method called after writing a response to the client. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_http_session_a6037f3eeab3a79ca19649b701f9db10e}{\+\_\+\+\_\+fail}} (const boost\+::system\+::error\+\_\+code \&err\+\_\+code, char const $\ast$what)
\begin{DoxyCompactList}\small\item\em Reports a failure. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_http_session_ab18318be45dffbfbfcdb12a0e0e61701}\label{class_http_session_ab18318be45dffbfbfcdb12a0e0e61701}} 
void \mbox{\hyperlink{class_http_session_ab18318be45dffbfbfcdb12a0e0e61701}{\+\_\+\+\_\+close\+Connection}} ()
\begin{DoxyCompactList}\small\item\em Closes the socket finishing the tcp connetcion. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_http_session_a06c1479160ed3a251f5e76bb2a2f7a12}\label{class_http_session_a06c1479160ed3a251f5e76bb2a2f7a12}} 
const std\+::string \mbox{\hyperlink{class_http_session_a06c1479160ed3a251f5e76bb2a2f7a12}{\+\_\+\+\_\+client\+ID}}
\begin{DoxyCompactList}\small\item\em Client\textquotesingle{}s ID. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_http_session_a75af2aa42d32dedf6d432934c2c4003d}\label{class_http_session_a75af2aa42d32dedf6d432934c2c4003d}} 
\mbox{\hyperlink{class_server}{Server}} \& \mbox{\hyperlink{class_http_session_a75af2aa42d32dedf6d432934c2c4003d}{\+\_\+\+\_\+server}}
\begin{DoxyCompactList}\small\item\em Reference to the \mbox{\hyperlink{class_server}{Server}} object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_http_session_ab248ff870024c03b43273226e070489e}\label{class_http_session_ab248ff870024c03b43273226e070489e}} 
boost\+::asio\+::ip\+::tcp\+::socket \mbox{\hyperlink{class_http_session_ab248ff870024c03b43273226e070489e}{\+\_\+\+\_\+socket}}
\begin{DoxyCompactList}\small\item\em Socket associated with the connection. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_http_session_ac8ae2f1a14796ead60dfc92f75c99f3f}\label{class_http_session_ac8ae2f1a14796ead60dfc92f75c99f3f}} 
boost\+::beast\+::flat\+\_\+buffer \mbox{\hyperlink{class_http_session_ac8ae2f1a14796ead60dfc92f75c99f3f}{\+\_\+\+\_\+buffer}}
\begin{DoxyCompactList}\small\item\em Buffer used in async\+\_\+read() and async\+\_\+write() operations. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_http_session_af9dc9471f097d7a38c7472ddd07c3260}\label{class_http_session_af9dc9471f097d7a38c7472ddd07c3260}} 
boost\+::beast\+::http\+::request$<$ boost\+::beast\+::http\+::string\+\_\+body $>$ \mbox{\hyperlink{class_http_session_af9dc9471f097d7a38c7472ddd07c3260}{\+\_\+\+\_\+req}}
\begin{DoxyCompactList}\small\item\em H\+T\+TP request from the client. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_http_session_ad0d318d3449c26b8957d000aca47b284}\label{class_http_session_ad0d318d3449c26b8957d000aca47b284}} 
boost\+::asio\+::steady\+\_\+timer \mbox{\hyperlink{class_http_session_ad0d318d3449c26b8957d000aca47b284}{\+\_\+\+\_\+session\+Timeout\+Timer}}
\begin{DoxyCompactList}\small\item\em Timeout measuring session\textquotesingle{}s timeout. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_http_session_affa7653d5a7d381382b701f0d61c8148}\label{class_http_session_affa7653d5a7d381382b701f0d61c8148}} 
\mbox{\hyperlink{class_request_handler}{Request\+Handler}} \mbox{\hyperlink{class_http_session_affa7653d5a7d381382b701f0d61c8148}{\+\_\+\+\_\+handler}}
\begin{DoxyCompactList}\small\item\em Handler responsible for communication with M\+VC instance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_http_session_aab7027014edc119862632b32be82506e}\label{class_http_session_aab7027014edc119862632b32be82506e}} 
class {\bfseries Http\+Session\+Test}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class representing a single H\+T\+TP session. 

Servers requests acquired from the client using \mbox{\hyperlink{class_request_handler}{Request\+Handler}} class to parse, interpret request and send back a response. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_http_session_abd5cd2414a9ad959461ac4fec9f774d0}\label{class_http_session_abd5cd2414a9ad959461ac4fec9f774d0}} 
\index{HttpSession@{HttpSession}!HttpSession@{HttpSession}}
\index{HttpSession@{HttpSession}!HttpSession@{HttpSession}}
\doxysubsubsection{\texorpdfstring{HttpSession()}{HttpSession()}}
{\footnotesize\ttfamily Http\+Session\+::\+Http\+Session (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_server}{Server}} \&}]{server,  }\item[{const std\+::string \&}]{client\+\_\+id,  }\item[{boost\+::asio\+::ip\+::tcp\+::socket \&\&}]{socket }\end{DoxyParamCaption})}



Construct a new Http Session\+:\+: Http Session object. 


\begin{DoxyParams}{Parameters}
{\em server} & Reference to the \mbox{\hyperlink{class_server}{Server}} object owning session \\
\hline
{\em client\+\_\+id} & Identifier of the client initializing session \\
\hline
{\em socket} & Boost\+:asio\+:\+:ip\+::tcp\+::socket associated with the session\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
\mbox{\hyperlink{class_http_session}{Http\+Session}} instance should be created by the shared pointer and \mbox{\hyperlink{class_http_session_a1b32fb61d4134c2180c70edd886997b3}{run()}} method should be called before the end of the creating scope. This approach to creation delegates session\textquotesingle{}s life-\/time responsibility to the object itself, which is desired behaviour. 
\end{DoxyNote}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_http_session_a6037f3eeab3a79ca19649b701f9db10e}\label{class_http_session_a6037f3eeab3a79ca19649b701f9db10e}} 
\index{HttpSession@{HttpSession}!\_\_fail@{\_\_fail}}
\index{\_\_fail@{\_\_fail}!HttpSession@{HttpSession}}
\doxysubsubsection{\texorpdfstring{\_\_fail()}{\_\_fail()}}
{\footnotesize\ttfamily void Http\+Session\+::\+\_\+\+\_\+fail (\begin{DoxyParamCaption}\item[{const boost\+::system\+::error\+\_\+code \&}]{err\+\_\+code,  }\item[{char const $\ast$}]{what }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Reports a failure. 


\begin{DoxyParams}{Parameters}
{\em err\+\_\+code} & Reported error code \\
\hline
{\em what} & Reason of the failure \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_http_session_a948383f51cff9c0f300ccaa7c84718a9}\label{class_http_session_a948383f51cff9c0f300ccaa7c84718a9}} 
\index{HttpSession@{HttpSession}!\_\_onRead@{\_\_onRead}}
\index{\_\_onRead@{\_\_onRead}!HttpSession@{HttpSession}}
\doxysubsubsection{\texorpdfstring{\_\_onRead()}{\_\_onRead()}}
{\footnotesize\ttfamily void Http\+Session\+::\+\_\+\+\_\+on\+Read (\begin{DoxyParamCaption}\item[{boost\+::system\+::error\+\_\+code}]{err\+\_\+code,  }\item[{std\+::size\+\_\+t}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Method called after getting a new request from the client. 


\begin{DoxyParams}{Parameters}
{\em err\+\_\+code} & \+: Error code from the async\+\_\+read() \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_http_session_ac1db714d3d96b8650a9a9eb20ceadbc3}\label{class_http_session_ac1db714d3d96b8650a9a9eb20ceadbc3}} 
\index{HttpSession@{HttpSession}!\_\_onWrite@{\_\_onWrite}}
\index{\_\_onWrite@{\_\_onWrite}!HttpSession@{HttpSession}}
\doxysubsubsection{\texorpdfstring{\_\_onWrite()}{\_\_onWrite()}}
{\footnotesize\ttfamily void Http\+Session\+::\+\_\+\+\_\+on\+Write (\begin{DoxyParamCaption}\item[{boost\+::system\+::error\+\_\+code}]{err\+\_\+code,  }\item[{std\+::size\+\_\+t}]{,  }\item[{bool}]{close }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Method called after writing a response to the client. 


\begin{DoxyParams}{Parameters}
{\em err\+\_\+code} & \+: Error code of the async\+\_\+write() \\
\hline
{\em close} & \+: True if connection is to be closed \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_http_session_a1b32fb61d4134c2180c70edd886997b3}\label{class_http_session_a1b32fb61d4134c2180c70edd886997b3}} 
\index{HttpSession@{HttpSession}!run@{run}}
\index{run@{run}!HttpSession@{HttpSession}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void Http\+Session\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Run the session. 

\begin{DoxyNote}{Note}
\mbox{\hyperlink{class_http_session_a1b32fb61d4134c2180c70edd886997b3}{run()}} method creates another shared\+\_\+ptr on the \mbox{\hyperlink{class_http_session}{Http\+Session}} (first was created by Listener\+::\+\_\+\+\_\+on\+\_\+accept()) which, in turn, is again removed at the end of the scope.
\end{DoxyNote}
At this time it\textquotesingle{}s \mbox{\hyperlink{class_http_session_a948383f51cff9c0f300ccaa7c84718a9}{\+\_\+\+\_\+on\+Read()}} method\textquotesingle{}s responsibility to prolong object\textquotesingle{}s lifetime. Method\textquotesingle{}s call decides if object\textquotesingle{}s should be maintained or deleted.

\begin{DoxySeeAlso}{See also}
Listener\+::\+\_\+\+\_\+on\+\_\+accept() (\mbox{\hyperlink{_listener_8cc}{Listener.\+cc}}) 
\end{DoxySeeAlso}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/cris/\+Desktop/\+Projekt/include/app/server/\mbox{\hyperlink{_http_session_8h}{Http\+Session.\+h}}\item 
/home/cris/\+Desktop/\+Projekt/src/server/\mbox{\hyperlink{_http_session_8cc}{Http\+Session.\+cc}}\end{DoxyCompactItemize}
